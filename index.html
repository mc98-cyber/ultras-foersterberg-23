<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ultras Försterberg '23</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            background-color: #3e65ff;
            font-family: Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background-color: white;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        header {
            text-align: center;
            padding: 0;
        }
        
        .header-image {
            width: 100%;
            height: auto;
            display: block;
        }
        
        nav {
            background-color: white;
            text-align: center;
            padding: 15px 0;
            border-bottom: 4px solid #f0f0f0;
        }
        
        nav ul {
            list-style-type: none;
            display: flex;
            justify-content: center;
        }
        
        nav li {
            margin: 0 20px;
        }
        
        nav a {
            text-decoration: none;
            color: #333;
            font-size: 18px;
            font-weight: bold;
            padding: 10px 15px;
            transition: color 0.3s;
        }
        
        nav a:hover {
            color: #3e65ff;
        }
        
        main {
            padding: 40px 20px;
            flex-grow: 1;
        }
        
        section {
            display: none;
        }
        
        section.active {
            display: block;
        }
        
        h2 {
            color: #3e65ff;
            margin-bottom: 20px;
            font-size: 28px;
            text-align: center;
        }
        
        h3 {
            color: #333;
            margin: 20px 0 10px;
            font-size: 22px;
        }
        
        p {
            margin-bottom: 15px;
            font-size: 16px;
        }
        
        /* Galerie-Styles */
        .season-selector {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 1px solid #ddd;
            justify-content: center;
        }
        
        .season-tab {
            padding: 10px 20px;
            cursor: pointer;
            font-weight: bold;
            border-bottom: 3px solid transparent;
            transition: all 0.3s;
        }
        
        .season-tab.active {
            border-bottom: 3px solid #3e65ff;
            color: #3e65ff;
        }
        
        .season-tab:hover {
            color: #3e65ff;
        }
        
        .matchday-selector {
            margin-bottom: 20px;
        }
        
        .matchday-list {
            list-style-type: none;
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
        }
        
        .matchday-item {
            padding: 8px 15px;
            background-color: #f5f5f5;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .matchday-item:hover {
            background-color: #3e65ff;
            color: white;
        }
        
        .matchday-item.active {
            background-color: #3e65ff;
            color: white;
        }
        
        .gallery {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .gallery-item {
            background-color: #f5f5f5;
            height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 5px;
            overflow: hidden;
            position: relative;
        }
        
        .gallery-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .no-images {
            text-align: center;
            padding: 40px;
            background-color: #f9f9f9;
            border-radius: 5px;
            color: #666;
            grid-column: 1 / -1;
        }
        
        .latest-matchday {
            margin-top: 20px;
            padding: 15px;
            background-color: #f0f8ff;
            border-radius: 5px;
            border-left: 4px solid #3e65ff;
        }
        
        /* Aktuelles Styles */
        .news-item {
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eee;
        }
        
        .news-date {
            color: #666;
            font-size: 14px;
            margin-bottom: 5px;
        }
        
        .news-content {
            margin-top: 10px;
        }
        
        .news-images {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        
        footer {
            background-color: #3e65ff;
            color: white;
            text-align: center;
            padding: 20px;
            margin-top: auto;
        }
        
        /* Mobile Optimierungen */
        @media (max-width: 768px) {
            nav ul {
                flex-direction: column;
                align-items: center;
            }
            
            nav li {
                margin: 8px 0;
                width: 100%;
                text-align: center;
            }
            
            nav a {
                display: block;
                width: 100%;
                padding: 12px 0;
                font-size: 16px;
            }
            
            .season-selector {
                flex-direction: column;
                align-items: center;
            }
            
            .matchday-list {
                flex-direction: column;
                align-items: center;
            }
            
            .gallery {
                grid-template-columns: 1fr;
            }
            
            main {
                padding: 20px 15px;
                min-height: 70vh;
            }
        }
        
        @media (max-width: 480px) {
            h2 {
                font-size: 24px;
            }
            
            h3 {
                font-size: 20px;
            }
            
            .gallery-item {
                height: 180px;
            }
            
            main {
                min-height: 80vh;
            }
        }

        .loading {
            text-align: center;
            padding: 20px;
            color: #666;
        }
        
        .error {
            text-align: center;
            padding: 20px;
            background-color: #ffe6e6;
            border-radius: 5px;
            color: #d00;
            border: 1px solid #ffcccc;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <img src="header.png" alt="Ultras Försterberg" class="header-image">
        </header>
        
        <nav>
            <ul>
                <li><a href="#" data-section="home">Home</a></li>
                <li><a href="#" data-section="aktuelles">Aktuelles</a></li>
                <li><a href="#" data-section="galerie">Galerie</a></li>
            </ul>
        </nav>
        
        <main>
            <section id="home" class="active">
                <h2>Willkommen bei Ultras Försterberg</h2>
                <p>Wir sind eine leidenschaftliche Gruppe von Fans, die sich voll und ganz unserem Verein verschrieben hat. Hier findest du alle Informationen, Neuigkeiten und Bilder von unseren Aktivitäten.</p>
                <p>Unsere Ultragruppe wurde gegründet, um die Stimmung im Stadion zu verbessern und unseren Verein auf jeder Ebene zu unterstützen.</p>
            </section>
            
            <section id="aktuelles">
                <h2>Aktuelles</h2>
                <div id="news-container">
                    <div class="loading">Lade Aktuelles...</div>
                </div>
            </section>
            
            <section id="galerie">
                <h2>Galerie</h2>
                
                <div class="season-selector">
                    <div class="season-tab active" data-season="2025-26">2025/26</div>
                    <div class="season-tab" data-season="sonstiges">Sonstiges</div>
                </div>
                
                <div class="latest-matchday">
                    <h3>Neuester Spieltag: <span id="latest-matchday-name"></span></h3>
                    <div class="gallery" id="latest-gallery">
                        <div class="loading">Lade neuesten Spieltag...</div>
                    </div>
                </div>
                
                <div class="matchday-selector">
                    <h3>Spieltage auswählen:</h3>
                    <ul class="matchday-list" id="matchday-list">
                        <li class="loading">Lade Spieltage...</li>
                    </ul>
                </div>
                
                <div id="selected-gallery">
                    <div class="no-images">Bitte wähle einen Spieltag aus, um die Bilder zu sehen.</div>
                </div>
            </section>
        </main>
        
        <footer>
            <p>&copy; Ultras Försterberg '23 - Alle Rechte vorbehalten</p>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const navLinks = document.querySelectorAll('nav a');
            const sections = document.querySelectorAll('section');
            
            // Navigation zwischen Home, Aktuelles und Galerie
            navLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    // Entferne aktive Klasse von allen Links und Sektionen
                    navLinks.forEach(l => l.classList.remove('active'));
                    sections.forEach(s => s.classList.remove('active'));
                    
                    // Füge aktive Klasse zum geklickten Link hinzu
                    this.classList.add('active');
                    
                    // Zeige die entsprechende Sektion an
                    const sectionId = this.getAttribute('data-section');
                    document.getElementById(sectionId).classList.add('active');
                });
            });
            
            // Lade Daten von der data.json Datei
            loadData();
            
            async function loadData() {
                try {
                    // Versuche Daten von data.json zu laden mit Cache-Busting
                    const response = await fetch('data.json?' + new Date().getTime());
                    
                    if (!response.ok) {
                        throw new Error('data.json nicht gefunden');
                    }
                    
                    const data = await response.json();
                    
                    // Validiere die Datenstruktur
                    if (!data.news || !data.gallery) {
                        throw new Error('Ungültige Datenstruktur in data.json');
                    }
                    
                    // Zeige die geladenen Daten an
                    displayNews(data.news);
                    initializeGallery(data.gallery);
                    
                } catch (error) {
                    console.error('Fehler beim Laden der Daten:', error);
                    
                    // Detaillierte Fehlermeldung anzeigen
                    let errorMessage = 'Daten konnten nicht geladen werden: ';
                    
                    if (error.message.includes('nicht gefunden')) {
                        errorMessage += 'data.json Datei wurde nicht gefunden. Bitte stelle sicher, dass die Datei im gleichen Verzeichnis wie index.html liegt.';
                    } else if (error.message.includes('Ungültige Datenstruktur')) {
                        errorMessage += 'Die data.json Datei hat eine ungültige Struktur. Bitte überprüfe das Format.';
                    } else {
                        errorMessage += error.message;
                    }
                    
                    document.getElementById('news-container').innerHTML = 
                        `<div class="error">${errorMessage}</div>`;
                    
                    document.getElementById('latest-gallery').innerHTML = 
                        `<div class="error">${errorMessage}</div>`;
                    
                    document.getElementById('matchday-list').innerHTML = 
                        `<li class="error">${errorMessage}</li>`;
                }
            }
            
            function displayNews(newsData) {
                const newsContainer = document.getElementById('news-container');
                newsContainer.innerHTML = '';
                
                if (!newsData || newsData.length === 0) {
                    newsContainer.innerHTML = '<div class="no-images">Noch keine Beiträge vorhanden.</div>';
                    return;
                }
                
                // News nach Datum sortieren (neueste zuerst)
                newsData.sort((a, b) => new Date(b.date) - new Date(a.date));
                
                // News-Beiträge anzeigen
                newsData.forEach(news => {
                    const newsItem = document.createElement('div');
                    newsItem.className = 'news-item';
                    
                    const date = new Date(news.date);
                    const formattedDate = date.toLocaleDateString('de-DE', {
                        year: 'numeric',
                        month: 'long',
                        day: 'numeric'
                    });
                    
                    newsItem.innerHTML = `
                        <h3>${news.title}</h3>
                        <div class="news-date">${formattedDate}</div>
                        <div class="news-content">${news.content}</div>
                    `;
                    
                    // Bilder hinzufügen, falls vorhanden
                    if (news.images && news.images.length > 0) {
                        const imagesContainer = document.createElement('div');
                        imagesContainer.className = 'news-images';
                        
                        news.images.forEach(imageUrl => {
                            const img = document.createElement('img');
                            img.src = imageUrl;
                            img.alt = news.title;
                            img.style.maxWidth = '100%';
                            img.style.height = 'auto';
                            imagesContainer.appendChild(img);
                        });
                        
                        newsItem.appendChild(imagesContainer);
                    }
                    
                    newsContainer.appendChild(newsItem);
                });
            }
            
            function initializeGallery(galleryData) {
                // Saison-Auswahl
                const seasonTabs = document.querySelectorAll('.season-tab');
                const matchdayList = document.getElementById('matchday-list');
                const selectedGallery = document.getElementById('selected-gallery');
                const latestGallery = document.getElementById('latest-gallery');
                const latestMatchdayName = document.getElementById('latest-matchday-name');
                
                let currentSeason = '2025-26';
                
                // Funktion zum Aktualisieren der Spieltage-Liste
                function updateMatchdayList(season) {
                    currentSeason = season;
                    
                    // Leere die aktuelle Liste
                    matchdayList.innerHTML = '';
                    
                    // Füge Spieltage für die ausgewählte Saison hinzu
                    const matchdays = Object.keys(galleryData[season] || {});
                    
                    if (matchdays.length === 0) {
                        matchdayList.innerHTML = '<li class="no-matchdays">Noch keine Spieltage/Events für diese Saison vorhanden.</li>';
                        latestMatchdayName.textContent = 'Keine Spieltage vorhanden';
                        latestGallery.innerHTML = '<div class="no-images">Noch keine Bilder vorhanden.</div>';
                        return;
                    }
                    
                    matchdays.forEach(matchday => {
                        const li = document.createElement('li');
                        li.className = 'matchday-item';
                        li.textContent = matchday;
                        li.setAttribute('data-matchday', matchday);
                        
                        li.addEventListener('click', function() {
                            // Entferne aktive Klasse von allen Spieltagen
                            document.querySelectorAll('.matchday-item').forEach(item => {
                                item.classList.remove('active');
                            });
                            
                            // Füge aktive Klasse zum geklickten Spieltag hinzu
                            this.classList.add('active');
                            
                            // Zeige die Bilder für diesen Spieltag an
                            showMatchdayImages(season, matchday);
                        });
                        
                        matchdayList.appendChild(li);
                    });
                    
                    // Zeige den neuesten Spieltag an
                    if (matchdays.length > 0) {
                        const latestMatchday = matchdays[0];
                        latestMatchdayName.textContent = latestMatchday;
                        updateLatestGallery(season, latestMatchday);
                    }
                }
                
                function updateLatestGallery(season, matchday) {
                    const images = galleryData[season][matchday];
                    latestGallery.innerHTML = '';
                    
                    if (!images || images.length === 0) {
                        latestGallery.innerHTML = '<div class="no-images">Für diesen Spieltag sind noch keine Bilder vorhanden.</div>';
                    } else {
                        images.forEach(imageSrc => {
                            const galleryItem = document.createElement('div');
                            galleryItem.className = 'gallery-item';
                            
                            const img = document.createElement('img');
                            img.src = imageSrc;
                            img.alt = `Bild von ${matchday}`;
                            
                            galleryItem.appendChild(img);
                            latestGallery.appendChild(galleryItem);
                        });
                    }
                }
                
                function showMatchdayImages(season, matchday) {
                    const images = galleryData[season][matchday];
                    
                    // Leere die Galerie
                    selectedGallery.innerHTML = '';
                    
                    if (!images || images.length === 0) {
                        // Zeige "Keine Bilder" Nachricht
                        selectedGallery.innerHTML = '<div class="no-images">Für diesen Spieltag sind noch keine Bilder vorhanden.</div>';
                    } else {
                        // Erstelle Galerie-Container
                        const gallery = document.createElement('div');
                        gallery.className = 'gallery';
                        
                        // Füge Bilder hinzu
                        images.forEach(imageSrc => {
                            const galleryItem = document.createElement('div');
                            galleryItem.className = 'gallery-item';
                            
                            const img = document.createElement('img');
                            img.src = imageSrc;
                            img.alt = `Bild von ${matchday}`;
                            
                            galleryItem.appendChild(img);
                            gallery.appendChild(galleryItem);
                        });
                        
                        selectedGallery.appendChild(gallery);
                    }
                }
                
                // Event-Listener für Saison-Tabs
                seasonTabs.forEach(tab => {
                    tab.addEventListener('click', function() {
                        // Entferne aktive Klasse von allen Tabs
                        seasonTabs.forEach(t => t.classList.remove('active'));
                        
                        // Füge aktive Klasse zum geklickten Tab hinzu
                        this.classList.add('active');
                        
                        // Aktualisiere die Spieltage-Liste
                        const season = this.getAttribute('data-season');
                        updateMatchdayList(season);
                        
                        // Leere die ausgewählte Galerie
                        selectedGallery.innerHTML = '<div class="no-images">Bitte wähle einen Spieltag aus, um die Bilder zu sehen.</div>';
                    });
                });
                
                // Initialisiere die Galerie mit der ersten Saison
                updateMatchdayList('2025-26');
            }
        });
    </script>
</body>
</html>
